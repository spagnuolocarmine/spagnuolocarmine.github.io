<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta http-equiv="refresh" content="3; url=/"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Programmazione concorrente, parallela e su cloud | Carmine Spagnuolo</title> <meta name="author" content="Carmine Spagnuolo"> <meta name="description" content="Laurea Magistrale in Informatica"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9B%B5&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://spagnuolocarmine.github.io/teaching/2_pcpc/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">CarmineÂ </span>Spagnuolo</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">students</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/teaching/">teaching</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/thesis/">thesis</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Programmazione concorrente, parallela e su cloud</h1> <p class="post-description">Laurea Magistrale in Informatica</p> </header> <article> <h4 id="master-degree-course-of-prof-vittorio-scarano-and-carmine-spagnuolo-phd">Master Degree Course of prof. Vittorio Scarano and Carmine Spagnuolo, Ph.D.</h4> <h5 id="universitÃ -degli-studi-di-salerno">UniversitÃ  degli Studi di Salerno</h5> <hr> <h2 id="books-and-references">Books and References</h2> <ol> <li>Kai Hwang, Jack Dongarra, and Geoffrey C. Fox. 2011. Distributed and Cloud Computing: From Parallel Processing to the Internet of Things (1st ed.). Morgan Kaufmann Publishers Inc., San Francisco, CA, USA.</li> <li>Czech, Z. (2017). Introduction to Parallel Computing. Cambridge: Cambridge University Press.</li> </ol> <h1 id="materials-for-online-course">Materials for online course</h1> <ul> <li>ðŸ“… 02/03/2020 <ul> <li><a href="https://spagnuolocarmine.github.io/assets/files/pcpc2020/aws-overview.pdf">ðŸ“„ AWS Overview</a></li> <li><a href="https://spagnuolocarmine.github.io/assets/files/pcpc2020/02032020_a.pdf">ðŸ“„ Slides Part A</a></li> <li><a href="https://spagnuolocarmine.github.io/assets/files/pcpc2020/02032020_b.pdf">ðŸ“„ Slides Part B</a></li> </ul> </li> <li>ðŸ“… 16/03/2020 <ul> <li><a href="https://spagnuolocarmine.github.io/assets/files/pcpc2020/16032020.pdf">ðŸ“„ Slides</a></li> <li><a href="https://gitter.im/isislab-unisa/pcpc2020?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="external nofollow noopener" target="_blank"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Public class chat https://gitter.im/isislab-unisa/pcpc2020"></a></li> </ul> </li> </ul> <h2 id="class-question-forum">Class Question Forum</h2> <p>We use issues on <a href="https://github.com/spagnuolocarmine/spagnuolocarmine.github.io/issues" rel="external nofollow noopener" target="_blank">GitHub</a>. Please use it for sharing ideas and issues on both theoretical and practical course part.</p> <hr> <h1 id="which-is-my-course-homework">Which is my course homework?</h1> <p>Each student must develop a solution for the assigned homework using Hybrid parallel programming approach, exploiting shared and distributed memory. The solution must be written in C programming language exploiting OpenMPI and OpenMP, using point-to-point and/or collective communication and all OpenMP features. The developed solution must experiment on a homogeneous cluster scenario.</p> <p>The cluster must be created on the Amazon Web Services using a supported <a href="https://s3.amazonaws.com/awseducate-starter-account-services/AWS_Educate_Starter_Accounts_and_AWS_Services.pdf" rel="external nofollow noopener" target="_blank">AWS Educate Instances</a>. The obtained results must be presented in terms of <a href="https://www.sharcnet.ca/help/index.php/Measuring_Parallel_Scaling_Performance" rel="external nofollow noopener" target="_blank">strong and weak scalability</a>, varying the number of computing processors from <em>1</em> to <em>NUMBER-OF-VCPU-FOR-INSTANCE-TYPE</em> <em>x</em> <em>NUMBER-OF-INSTANCES</em>. For instance if we run a cluster machine of <em>4</em> t2.large (2 VCPU) nodes, we experimente the scalability of our solution for P={1,2,4,5,6,7,8}.</p> <p>The total number of processors is equal to the number of Virtual CPU on the running instances. The benchmark must exploit <strong>8</strong> instances for the bigger experiment. The student must describe the solution and the benchmark in a README file, written in Markdown, and included in the submission. The README file must describe also the compilation phase and how to reproduce the results obtained.</p> <h4 id="homeworks">Homeworks</h4> <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Details</th> </tr> </thead> <tbody> <tr> <td><em>gameoflife</em></td> <td>Conwayâ€™s Game of Life Game</td> <td><a href="gol">link</a></td> </tr> <tr> <td><em>jacobi</em></td> <td>Simple Jacobi iteration</td> <td><a href="jacobi">link</a></td> </tr> <tr> <td><em>matrixmultiplication</em></td> <td>Parallel matrix multiplication</td> <td><a href="matrix">link</a></td> </tr> <tr> <td><em>nbody</em></td> <td>n-body problem</td> <td><a href="nbody">link</a></td> </tr> <tr> <td><em>pi</em></td> <td>Compute in parallel an approximation of PI</td> <td><a href="pi">link</a></td> </tr> <tr> <td><em>wordscount</em></td> <td>Compute the frequency of words in a set of files</td> <td><a href="wordscount">link</a></td> </tr> </tbody> </table> <h4 id="amzon-web-services-educate-supported-instances">Amzon Web Services educate supported instances</h4> <ol> <li>t2.small</li> <li>t2.large</li> <li>t2.xlarge</li> <li>t2.2xlarge</li> <li>m4.large</li> <li>m4.xlarge</li> </ol> <h3 id="give-me-a-project-now">Give me a project now!</h3> <p>Compute the MD5 of your name, surname, and birth date, <code class="language-plaintext highlighter-rouge">md5(namesurnamedate)</code>:</p> <ul> <li>the first character in the MD5 is the homework;</li> <li>the last character in the MD5 is the AWS EC2 instance type for your cluster environment.</li> </ul> <p>Characters table conversion (use case insentive):</p> <table> <thead> <tr> <th>Character</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>a-g-m-s-y-4</td> <td>1</td> </tr> <tr> <td>b-h-n-t-z-5</td> <td>2</td> </tr> <tr> <td>c-i-o-u-0-6</td> <td>3</td> </tr> <tr> <td>d-j-p-v-1-7</td> <td>4</td> </tr> <tr> <td>e-k-q-w-2-8</td> <td>5</td> </tr> <tr> <td>f-l-r-x-3-9</td> <td>6</td> </tr> </tbody> </table> <p><strong>Example</strong> Alice Wonderland 01/01/1865, your assignment is <em>alicewonderland01011865</em>, <code class="language-plaintext highlighter-rouge">md5(alicewonderland01011865)=89820e2ce860966ccd9165e4029035e7</code>, that is solve the <em>pi</em> problem on <em>t2.2xlarge</em> instances.</p> <h3 id="prepare-your-submition">Prepare your submition</h3> <p>Each solution folder must contain the C sources and a report Readme file (in Markdown format) describing all benchmarks (expressed in terms of strong and weak scalability) of the application. Solutions without the Readme file or that cannot easily compile using mpicc will be not considered.</p> <p>In your home project directory archives your project:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -cvf solution.tar.gz *
</code></pre></div></div> <p>Extract your project:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -xvf solution.tar.gz
</code></pre></div></div> <h3 id="submit-a-solution">Submit a solution</h3> <p>Each solution should be compliant with the problem project template. You can submit a solution via mail to cspagnuolo+PCPC-2019@unisa.it. The submitted file should be a compressed directory using tape archive.</p> <h3 id="homework-evaluation-criteria">Homework Evaluation Criteria</h3> <p>Homeworks are evaluated on a range of 30 total points. The final score is diveded in four level:</p> <ul> <li> <strong>A</strong> [30-28]</li> <li> <strong>B</strong> [27-25]</li> <li> <strong>C</strong> [24-22]</li> <li> <strong>D</strong> [21-18]</li> </ul> <h4 id="points">Points</h4> <ul> <li> <strong>Correctness</strong>. 0 to 10 points. Measures the studentâ€™s commitment to develop a solution that is compliant with the problem requirement (obviously!). But also solution that solve part of the problem can be evaluated, if it is clear that only minor part of the problem are not correctly solved.</li> <li> <strong>Style</strong>. 0 to 10 points. Measures the studentâ€™s commitment to develop a solution styling it and exploiting all features of MPI and C language, paying attention to use arguments of the parallel and concurrent computing fundamental part. Moreover, the ability to use other MPI features not presented during the course will be evaluated (ref. Cap 4-6-7 <a href="https://www.mpi-forum.org/docs/mpi-2.2/mpi22-report.pdf" rel="external nofollow noopener" target="_blank">MPI 2.2</a>).</li> <li> <strong>Problem evaluation and Benchamrks</strong>. 0 to 10 points. Measures the studentâ€™s commitment to undestand the problem and give a good solution, moreover, mesures the studentâ€™s commitment to presents benchamrks.</li> <li> <strong>Lateness</strong>. The total score is decreased by 5% each day, until a 40% eight days or more late. The homework <em>must</em> be subitted for review 8 days before the exam date.</li> </ul> <h4 id="benchmarks-tips">Benchmarks TIPS</h4> <p>Present your results in terms of strong and week scalability:</p> <ul> <li> <strong>Strong Scalability</strong>: How fast the problem size must increase in order to maintain a fixed efficiency when the number of processes is increased. In practice the total problem size stays the same as the number of processors increases. Goal: Minimize time to solution for a given problem.</li> <li> <strong>Weak Scalability</strong>: How fast the efficiency decreases when the number of processes increases but the problem size is fixed. In practice the problem size increases at the same rate as the number of processors, keeping the amount of work per processor equal. Goal: solve the larger problems.</li> </ul> <hr> <h1 id="how-benchmark-your-applications-on-a-aws">How benchmark your applications on a AWS?</h1> <h3 id="cluster-computing-scenario">Cluster Computing Scenario</h3> <ul> <li>1 Master Node, where we develop and compile our program for all cluster node.</li> <li>N Slaves, where we run the MPI program to execute benchmarks.</li> </ul> <h3 id="our-computing-environment-ubuntu-with-openmpi-and-openmp">Our computing environment Ubuntu with OpenMPI and OpenMP</h3> <p>For our purposes we need a Linux machine running OpenMPI and OpenMP. The <a href="https://github.com/spagnuolocarmine" rel="external nofollow noopener" target="_blank">repository</a> provides installation scripts to build our computing environment on a Ubuntu Machine.</p> <h3 id="configure-a-mpi-cluster-of-two-istances">Configure a MPI cluster of two istances?</h3> <p>Here is described how to execute and manually configure a cluster of two t2.micro instances using the AWS WebConsole.</p> <ol> <li>Create a new key-pair and store it on your local machine, suppose that the name of the key is <em>kcluster</em>.</li> <li>Start two new t2.micro instances using the Ubuntu AMI (ami-0f65671a86f061fcd) and select the <em>kcluster</em> key-pair, additionally rename it as <em>master</em> and <em>slave0</em>. Set a new rule to the default security group that allows to open all TCP ports (0-65535) from anywhere (you can do it in the Configure Security Group tab).</li> <li>Execute on the <em>master</em> node the command ```ssh-keygen`` in order to generate new ssh key pairs for configure the access to the cluser. Note. By using this command without parameters the key is stored in the folder .ssh, in the file id_rsa e id_rsa.pub.</li> <li>Download and your local machine the <a href="https://github.com/spagnuolocarmine/ubuntu-openmpi-openmp/blob/master/install.sh" rel="external nofollow noopener" target="_blank">install.sh</a> script and change the SSH key pairs using the previous generated key.</li> <li>Copy the install.sh using SCP on all nodes <code class="language-plaintext highlighter-rouge">scp -i kcluster install.sh ubuntu@ec2-34-207-88-239.compute-1.amazonaws.com:</code>.</li> <li>Connect via SSH <code class="language-plaintext highlighter-rouge">ssh -i kcluster_ubuntu@ec2-34-207-88-239.compute-1.amazonaws.com:</code> and execute install.sh on all nodes.</li> </ol> <hr> <h1 id="test-an-mpi-and-openmp-program">Test an MPI and OpenMP Program</h1> <p>Follow these steps in order to create and test a Hello World MPI program. Consider that you are logged as pcpc user on the master node.</p> <ul> <li>Create a new MPI program</li> </ul> <p><code class="language-plaintext highlighter-rouge">vim hello.c</code></p> <ul> <li>HelloWorld MPI program</li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;stdio.h&gt;
#include "mpi.h"
#include &lt;omp.h&gt;

int main(int argc, char *argv[]) {
  int numprocs, rank, namelen;
  char processor_name[MPI_MAX_PROCESSOR_NAME];
  int iam = 0, np = 1;

  MPI_Init(&amp;argc, &amp;argv);
  MPI_Comm_size(MPI_COMM_WORLD, &amp;numprocs);
  MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);
  MPI_Get_processor_name(processor_name, &amp;namelen);

  #pragma omp parallel default(shared) private(iam, np)
  {
    np = omp_get_num_threads();
    iam = omp_get_thread_num();
    printf("Hello from thread %d out of %d from process %d out of %d on %s\n",
           iam, np, rank, numprocs, processor_name);
  }

  MPI_Finalize();
}
</code></pre></div></div> <ul> <li>Compile the MPI program <code class="language-plaintext highlighter-rouge">mpicc -fopenmp hello.c -o hello</code> </li> <li>Copy on all cluster machine the compiled program <code class="language-plaintext highlighter-rouge">scp hello IP_SLAVE:</code> </li> <li>Run the program on the cluster <code class="language-plaintext highlighter-rouge">mpirun -np 4 --host MASTER,IP_SLAVE1,IP_SLAVE2 ./hello</code> </li> </ul> <hr> </article> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> Â© Copyright 2024 Carmine Spagnuolo. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: June 27, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>